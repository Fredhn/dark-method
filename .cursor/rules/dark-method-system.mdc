---
description: DARK-METHOD workflow; start from repo root, one agent at a time, approval gates, one folder per video project; run agents via slash commands
alwaysApply: true
---

# DARK-METHOD (repository root)

This repo uses **DARK-METHOD**. Open the **repository root** (dark.channel.maker).

**Running agents:** Users can **start** DARK-METHOD with **/start-dark-method** (or **/run-onboarding**). Run each agent by **clicking or typing a slash command** in chat. Type `/` in the chat input to see DARK-METHOD commands (e.g. **/start-dark-method**, **/run-onboarding**, **/run-producer**, **/run-retention-editor**). After approving an artifact, the agent tells the user to run the next agent via the slash command; the user clicks or types that command instead of writing "Run the X agent". Do not proceed to the next agent until the user has approved the current artifact and has run the next command themselves.

1. **Read** `dark-method/dark-method.system.md` for governing rules.
2. **Current project folder:** Read `dark-method/.current-project` (one line = project slug). If missing or empty, the user must run **/run-onboarding** first.
3. **Artifact base path (where episode-level artifacts live):** If **projects/{currentProjectFolder}/channel-brief.md** exists (Repeatable channel), read **dark-method/.current-video** (one line = video slug) and use **projects/{currentProjectFolder}/{currentVideoFolder}/**; otherwise use **projects/{currentProjectFolder}/**. All episode-level artifacts (production-brief, script, visuals, audio, packaging, publish, research) use this path. Channel-level: **channel-brief.md** stays at **projects/{currentProjectFolder}/**.
4. **First run / Onboarding:** When the user runs **/start-dark-method** or **/run-onboarding**, follow `dark-method/agents/onboarding.agent.md`. Onboarding asks first: **new project** or **existing project**? **New project:** creates **projects/{slug}/** (and channel-brief if Repeatable; for Repeatable, does not create the six episode files in root). **Existing project:** lists folders in **projects/**; user selects one; writes slug to `dark-method/.current-project` (Producer will create a per-video folder for this episode). Next: run Producer.
5. **Later runs:** When the user runs a slash command (e.g. **/run-producer**, **/run-retention-editor**), open the corresponding file in `dark-method/agents/` and follow it. All agents read/write episode-level artifacts using the **artifact base path** (see above).
6. After each approval, tell the user to run the next agent via the slash command (e.g. **/run-retention-editor**); do not run the next agent yourself.
7. **Presenting choices (UX):** Cursor chat has no native clickable option chips. When you offer multiple-choice options, use: **1** — Option A | **2** — Option B, then say **"Reply with 1 or 2, or type the option name."** For "next step", use slash commands (user can type **/** and click the command). Accept equivalent replies (e.g. "1", "new", "new project").

Workflow: Onboarding → Producer → Script Architect → Retention Editor → Voice Director → Visual Director → Editor → Audio Engineer → Packaging → Publishing. Commands: **/start-dark-method** (start), **/run-onboarding**, **/run-producer**, **/run-script-architect**, **/run-retention-editor**, **/run-voice-director**, **/run-visual-director**, **/run-editor**, **/run-audio-engineer**, **/run-packaging**, **/run-publishing**.

**MCP authorization gate:** When an agent asks to use MCP (images or TTS), it is **waiting for your reply** before doing anything. Look for the block titled **MCP AUTHORIZATION — WAITING FOR YOUR REPLY**. Reply **yes** or **authorize** to proceed; reply **no** (or skip) for manual steps.

**Image generation (Visual Director, Packaging):** Use **Stability AI MCP first** when configured (tool **generate-image**, server **stability-ai**); then Gemini; then Replicate; then Fal-AI. No reordering. See dark-method.system.md § Image generation workflow and dark-method/mcp-guide.md.

**DaVinci Resolve (Editor):** No MCP or automation. Editor generates **importable Python scripts** in the Fusion Scripts Comp per-video folder: when Repeatable channel use **Comp\{currentProjectFolder}\{currentVideoFolder}\**, else **Comp\{currentProjectFolder}\**; user runs the script manually in Resolve (free or Studio). See dark-method.system.md § DaVinci Resolve and editor.agent.md.
